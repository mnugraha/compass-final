import{L as V}from"./Admin-2b5121e9.js";import{H as A,L as D,r as N,a as O,b as h,o as m,c as _,d as b,w as y,e,f as S,g as u,v as j,h as L,F as T,i as H,t as r,j as F,k as E,l as C}from"./app-d479d588.js";import{P as I}from"./Pagination-f2932da7.js";import{S as i}from"./sweetalert2.all-d504ecd0.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";const R={layout:V,components:{Head:A,Link:D,Pagination:I},props:{errors:Object,exam:Object,exam_session:Object,users:Array},setup(d){const s=N({exam_id:d.exam.id,user_id:[],allSelected:!1}),a=()=>{s.allSelected?s.user_id=d.users.data.map(n=>n.id_user):s.user_id=[]},o=O(new URL(document.location).searchParams.get("q"));return{form:s,selectAll:a,submit:()=>{E.Inertia.post(`/admin/exam_sessions/${d.exam_session.id}/enrolle/store`,{exam_id:s.exam_id,user_id:s.user_id},{onSuccess:()=>{i.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:l=>{l.addEventListener("mouseenter",i.stopTimer),l.addEventListener("mouseleave",i.resumeTimer)}}).fire({icon:"success",title:"Data berhasil disimpan."})},onError:n=>{n.message&&i.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:c=>{c.addEventListener("mouseenter",i.stopTimer),c.addEventListener("mouseleave",i.resumeTimer)}}).fire({icon:"error",title:n.message||"Data gagal disimpan."})}})},search:o,handleSearch:()=>{E.Inertia.get(`/admin/exam_sessions/${d.exam_session.id}/enrolle/create`,{q:o.value})}}}},q=e("title",null,"Enrolle User",-1),K={class:"container-fluid mb-5 mt-5"},z={class:"row"},G={class:"col-md-12"},J=e("i",{class:"fa fa-long-arrow-alt-left me-2"},null,-1),Q=C(" Kembali"),W={class:"row"},X={class:"col-md-6 col-12 mb-2"},Y={class:"input-group"},Z=e("span",{class:"input-group-text border-0 shadow"},[e("i",{class:"fa fa-search"})],-1),$={class:"card border-0 shadow mt-1"},ee={class:"card-body"},te=e("h5",null,[e("i",{class:"fa fa-user-plus"}),C(" Enrolle User")],-1),se=e("hr",null,null,-1),oe={class:"table-responsive mb-4"},ae={class:"table table-bordered table-centered table-nowrap mb-0 rounded"},ne={class:"thead-dark"},ie={class:"border-0"},de={class:"border-0 rounded-start",style:{width:"5%"}},le=e("th",{class:"border-0"},"ID USER",-1),re=e("th",{class:"border-0"},"Nama",-1),ce=e("th",{class:"border-0"},"Function",-1),me=e("th",{class:"border-0"},"Level",-1),_e=e("div",{class:"mt-3"},null,-1),he=["id","value","checked"],be={class:"text-center"},ue={class:"text-center"},fe={key:0,class:"alert alert-danger mt-2"},ve=e("button",{type:"submit",class:"btn btn-md btn-primary border-0 shadow me-2"}," Simpan ",-1),pe=e("button",{type:"reset",class:"btn btn-md btn-warning border-0 shadow"}," Reset ",-1);function xe(d,s,a,o,B,P){var f,v,p,x,g;const n=h("Head"),l=h("Link"),c=h("Pagination");return m(),_(T,null,[b(n,null,{default:y(()=>[q]),_:1}),e("div",K,[e("div",z,[e("div",G,[b(l,{href:`/admin/exam_sessions/${(f=a.exam_session)==null?void 0:f.id}`,class:"btn btn-md btn-primary border-0 shadow mb-3",type:"button"},{default:y(()=>[J,Q]),_:1},8,["href"]),e("div",W,[e("div",X,[e("form",{onSubmit:s[1]||(s[1]=S((...t)=>o.handleSearch&&o.handleSearch(...t),["prevent"]))},[e("div",Y,[u(e("input",{type:"text",class:"form-control border-0 shadow","onUpdate:modelValue":s[0]||(s[0]=t=>o.search=t),placeholder:"masukkan kata kunci dan enter..."},null,512),[[j,o.search]]),Z])],32)])]),e("div",$,[e("div",ee,[te,se,e("form",{onSubmit:s[5]||(s[5]=S((...t)=>o.submit&&o.submit(...t),["prevent"]))},[e("div",oe,[e("table",ae,[e("thead",ne,[e("tr",ie,[e("th",de,[u(e("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=t=>o.form.allSelected=t),onChange:s[3]||(s[3]=(...t)=>o.selectAll&&o.selectAll(...t))},null,544),[[L,o.form.allSelected]])]),le,re,ce,me])]),_e,e("tbody",null,[(m(!0),_(T,null,H((v=a.users)==null?void 0:v.data,t=>{var w,k;return m(),_("tr",{key:t.id},[e("td",null,[u(e("input",{type:"checkbox","onUpdate:modelValue":s[4]||(s[4]=U=>o.form.user_id=U),id:t==null?void 0:t.id_user,value:t==null?void 0:t.id_user,number:"",checked:o.form.allSelected},null,8,he),[[L,o.form.user_id]])]),e("td",null,r(t==null?void 0:t.id_user),1),e("td",null,r(t==null?void 0:t.name),1),e("td",be,r((w=t==null?void 0:t.peran)==null?void 0:w.nm_peran),1),e("td",ue,r((k=t==null?void 0:t.level)==null?void 0:k.level),1)])}),128))])]),a.errors.user_id?(m(),_("div",fe,r(a.errors.user_id),1)):F("",!0)]),ve,pe,b(c,{links:(p=a.users)==null?void 0:p.links,show:(x=a.users)==null?void 0:x.per_page,total:(g=a.users)==null?void 0:g.total,align:"end"},null,8,["links","show","total"])],32)])])])])])],64)}const Le=M(R,[["render",xe]]);export{Le as default};
