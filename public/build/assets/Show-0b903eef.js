import{L as at}from"./User-b5354557.js";import{n as dt,$ as lt,H as rt,L as ct,a as N,Y as ut,b as W,o as a,c as d,d as J,w as X,e as t,t as l,j as c,F as I,i as Z,f as u,l as h,K as $,k as v}from"./app-d479d588.js";import{a as p}from"./axios-4a70c6fc.js";import{S as ht}from"./sweetalert2.all-d504ecd0.js";import{_ as _t}from"./_plugin-vue_export-helper-c27b6911.js";/*! vue-countdown v2.1.1 | (c) 2018-present Chen Fengyuan | MIT */const M=1e3,E=60*M,S=60*E,tt=24*S,st="abort",et="end",it="progress",ot="start",nt="visibilitychange";var mt=dt({name:"VueCountdown",props:{autoStart:{type:Boolean,default:!0},emitEvents:{type:Boolean,default:!0},interval:{type:Number,default:1e3,validator:i=>i>=0},now:{type:Function,default:()=>Date.now()},tag:{type:String,default:"span"},time:{type:Number,default:0,validator:i=>i>=0},transform:{type:Function,default:i=>i}},emits:[st,et,it,ot],data(){return{counting:!1,endTime:0,totalMilliseconds:0,requestId:0}},computed:{days(){return Math.floor(this.totalMilliseconds/tt)},hours(){return Math.floor(this.totalMilliseconds%tt/S)},minutes(){return Math.floor(this.totalMilliseconds%S/E)},seconds(){return Math.floor(this.totalMilliseconds%E/M)},milliseconds(){return Math.floor(this.totalMilliseconds%M)},totalDays(){return this.days},totalHours(){return Math.floor(this.totalMilliseconds/S)},totalMinutes(){return Math.floor(this.totalMilliseconds/E)},totalSeconds(){return Math.floor(this.totalMilliseconds/M)}},watch:{$props:{deep:!0,immediate:!0,handler(){this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.autoStart&&this.start()}}},mounted(){document.addEventListener(nt,this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener(nt,this.handleVisibilityChange),this.pause()},methods:{start(){this.counting||(this.counting=!0,this.emitEvents&&this.$emit(ot),document.visibilityState==="visible"&&this.continue())},continue(){if(!this.counting)return;const i=Math.min(this.totalMilliseconds,this.interval);if(i>0){let n,s;const e=_=>{n||(n=_),s||(s=_);const f=_-n;f>=i||f+(_-s)/2>=i?this.progress():this.requestId=requestAnimationFrame(e),s=_};this.requestId=requestAnimationFrame(e)}else this.end()},pause(){cancelAnimationFrame(this.requestId)},progress(){this.counting&&(this.update(),this.emitEvents&&this.totalMilliseconds>0&&this.$emit(it,{days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}),this.continue())},abort(){this.counting&&(this.pause(),this.counting=!1,this.emitEvents&&this.$emit(st))},end(){this.counting&&(this.pause(),this.totalMilliseconds=0,this.counting=!1,this.emitEvents&&this.$emit(et))},update(){this.counting&&(this.totalMilliseconds=Math.max(0,this.endTime-this.now()))},restart(){this.pause(),this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.counting=!1,this.start()},handleVisibilityChange(){switch(document.visibilityState){case"visible":this.update(),this.continue();break;case"hidden":this.pause();break}}},render(){return lt(this.tag,this.$slots.default?[this.$slots.default(this.transform({days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}))]:void 0)}});const bt={layout:at,components:{Head:rt,Link:ct,VueCountdown:mt},props:{id:Number,page:Number,exam_group:Object,all_questions:Array,question_answered:Number,question_active:Object,answer_order:Array,duration:Object},setup(i){let n=["A","B","C","D","E"];const s=N(i.duration.duration);let e;e=setInterval(()=>{s.value-=5e3,p.put(`/exam-duration/update/${i.duration.id}`,{duration:s.value})},5e3),ut(()=>{clearInterval(e)});const f=()=>{p.put(`/exam-duration/update/${i.duration.id}`,{duration:s.value}),v.Inertia.get(`/exam/${i.id}/${i.page-1}`)},C=()=>{p.put(`/exam-duration/update/${i.duration.id}`,{duration:s.value}),v.Inertia.get(`/exam/${i.id}/${i.page+1}`)},q=b=>{p.put(`/exam-duration/update/${i.duration.id}`,{duration:s.value}),v.Inertia.get(`/exam/${i.id}/${b+1}`)},y=(b,w,x)=>{v.Inertia.post("/exam-answer",{exam_id:b,exam_session_id:i.exam_group.exam_session.id,question_id:w,answer:x,duration:s.value})},g=N(!1),k=N(!1);return{options:n,duration:s,prevPage:f,nextPage:C,clickQuestion:q,submitAnswer:y,showModalEndExam:g,showModalEndTimeExam:k,endExam:()=>{v.Inertia.post("/exam-end",{exam_group_id:i.exam_group.id,exam_id:i.exam_group.exam.id,exam_session_id:i.exam_group.exam_session.id}),ht.fire({title:"Success!",text:"Ujian Selesai!.",icon:"success",showConfirmButton:!1,timer:4e3})}}}},ft={class:"row mb-5"},vt={class:"col-md-12 mb-2"},yt={class:"card border-0 shadow"},gt={class:"card-body"},kt={class:"table-responsive"},wt={class:"table table-centered table-nowrap mb-0 rounded table-borderless"},xt=t("td",{class:"fw-bold ps-0 py-1",style:{width:"5%"}}," Nama Lengkap ",-1),pt={class:"py-1"},Mt=t("td",{class:"fw-bold ps-0 py-1",style:{width:"5%"}}," Durasi ",-1),Et={class:"py-1"},St=t("td",{class:"fw-bold ps-0 py-1",style:{width:"5%"}}," Total Soal ",-1),Ct={class:"py-1"},qt={class:"col-md-8 my-2"},Tt={class:"card border-0 shadow mb-3 p-0",style:{"background-color":"#fbfafb"}},Nt={class:"card-header border-0"},It={class:"d-flex justify-content-between"},Lt={class:"mb-0"},Dt=h(" Soal No. "),Vt={class:"text-white bg-info px-2",style:{"border-radius":"3px"}},jt={class:"fw-bold"},Ht={class:"badge bg-info p-2",style:{"border-radius":"3px"}},At=t("i",{class:"fa fa-clock"},null,-1),Ot={class:"card-body pt-0"},Bt={class:"bg-white p-3 border rounded-1"},Ft={key:0},Pt={key:0,controls:""},Ut=["src"],Yt=["innerHTML"],Rt=t("hr",null,null,-1),Qt={width:"50",style:{padding:"10px"}},zt={key:0,class:"btn btn-info btn-sm w-100 shdaow"},Kt=["onClick"],Gt={style:{padding:"10px"}},Wt=["innerHTML"],Jt={key:1},Xt=t("div",{class:"alert alert-danger border-0 shadow"},[t("i",{class:"fa fa-exclamation-triangle"}),h(" Soal Tidak Ditemukan!. ")],-1),Zt=[Xt],$t={class:"d-flex justify-content-between"},ts={class:"text-start"},ss=t("i",{class:"fa fa-arrow-left",style:{"font-size":"12px","padding-right":"5px"}},null,-1),es=h(" Back "),is=[ss,es],os={class:"text-end"},ns=h(" Next "),as=t("i",{class:"fa fa-arrow-right",style:{"font-size":"12px","padding-left":"5px"}},null,-1),ds=[ns,as],ls={class:"col-md-4 my-2"},rs={class:"card border-0 shadow mb-3"},cs={class:"card-header text-center"},us={class:"badge bg-info p-2"},hs=t("i",{class:"fa fa-check-circle"},null,-1),_s={class:"badge bg-success p-2 m-2"},ms=t("i",{class:"fa fa-book"},null,-1),bs={class:"card-body",style:{"overflow-y":"auto"}},fs={width:"20%",style:{width:"20%",float:"left"}},vs={style:{padding:"5px"}},ys=["onClick"],gs=["onClick"],ks=["onClick"],ws={class:"card p-4"},xs={class:"modal-dialog"},ps={class:"modal-content"},Ms=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Akhiri Ujian ?")],-1),Es=t("div",{class:"modal-body"}," Setelah mengakhiri ujian, Anda tidak dapat kembali ke ujian ini lagi. Yakin akan mengakhiri ujian? ",-1),Ss={class:"modal-footer"},Cs={class:"modal-dialog"},qs={class:"modal-content"},Ts=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Waktu Habis !")],-1),Ns=t("div",{class:"modal-body"},[h(" Waktu ujian sudah berakhir!. Klik "),t("strong",{class:"fw-bold"},"Ya"),h(" untuk mengakhiri ujian. ")],-1),Is={class:"modal-footer"};function Ls(i,n,s,e,_,f){var y,g,k,T,b,w,x,L,D,V,j,H,A,O,B,F,P,U;const C=W("Head"),q=W("VueCountdown");return a(),d(I,null,[J(C,null,{default:X(()=>[t("title",null,"Ujian Dengan Nomor Soal : "+l(s.page),1)]),_:1}),t("div",ft,[t("div",vt,[t("div",yt,[t("div",gt,[t("h5",null,l((g=(y=s.exam_group)==null?void 0:y.exam)==null?void 0:g.title)+" - "+l((T=(k=s.exam_group)==null?void 0:k.exam_session)==null?void 0:T.title),1),t("div",kt,[t("table",wt,[t("thead",null,[t("tr",null,[xt,t("td",pt," : "+l(i.$page.props.auth.user.name),1)]),t("tr",null,[Mt,t("td",Et," : "+l((w=(b=s.exam_group)==null?void 0:b.exam)==null?void 0:w.duration)+" Menit ",1)]),t("tr",null,[St,t("td",Ct," : "+l((D=(L=(x=s.exam_group)==null?void 0:x.exam)==null?void 0:L.questions)==null?void 0:D.length),1)])])])])])])]),t("div",qt,[t("div",Tt,[t("div",Nt,[t("div",It,[t("div",null,[t("h5",Lt,[Dt,t("span",Vt,[t("strong",jt,l(s.page),1)])])]),t("div",null,[J(q,{time:e.duration,onEnd:n[0]||(n[0]=o=>e.showModalEndTimeExam=!0)},{default:X(({hours:o,minutes:r,seconds:m})=>[t("span",Ht,[At,h(" | "+l(o)+" : "+l(r)+" : "+l(m),1)])]),_:1},8,["time"])])])]),t("div",Ot,[t("div",Bt,[s.question_active!==null?(a(),d("div",Ft,[t("div",null,[(j=(V=s.question_active)==null?void 0:V.question)!=null&&j.question_file?(a(),d("audio",Pt,[t("source",{src:`/storage/exams/question/${(A=(H=s.question_active)==null?void 0:H.question)==null?void 0:A.question_file}`,type:"audio/mpeg"},null,8,Ut)])):c("",!0),(B=(O=s.question_active)==null?void 0:O.question)!=null&&B.question?(a(),d("p",{key:1,innerHTML:(P=(F=s.question_active)==null?void 0:F.question)==null?void 0:P.question},null,8,Yt)):c("",!0),Rt]),t("table",null,[t("tbody",null,[(a(!0),d(I,null,Z(s.answer_order,(o,r)=>{var m,Y;return a(),d("tr",{key:r},[t("td",Qt,[o==((m=s.question_active)==null?void 0:m.answer)?(a(),d("button",zt,l(e.options[r]),1)):(a(),d("button",{key:1,onClick:u(Ds=>{var R,Q,z,K,G;return e.submitAnswer((z=(Q=(R=s.question_active)==null?void 0:R.question)==null?void 0:Q.exam)==null?void 0:z.id,(G=(K=s.question_active)==null?void 0:K.question)==null?void 0:G.id,o)},["prevent"]),class:"btn btn-outline-primary btn-sm w-100 shdaow"},l(e.options[r]),9,Kt))]),t("td",Gt,[t("p",{innerHTML:(Y=s.question_active)==null?void 0:Y.question["option_"+o]},null,8,Wt)])])}),128))])])])):(a(),d("div",Jt,Zt))])])]),t("div",$t,[t("div",ts,[s.page>1?(a(),d("button",{key:0,onClick:n[1]||(n[1]=u((...o)=>e.prevPage&&e.prevPage(...o),["prevent"])),type:"button",class:"btn btn-info btn-sm btn-block mb-2"},is)):c("",!0)]),t("div",os,[s.page<Object.keys(s.all_questions).length?(a(),d("button",{key:0,onClick:n[2]||(n[2]=u((...o)=>e.nextPage&&e.nextPage(...o),["prevent"])),type:"button",class:"btn btn-info btn-sm"},ds)):c("",!0)])])]),t("div",ls,[t("div",rs,[t("div",cs,[t("div",us,[hs,h(" "+l(s.question_answered)+" dikerjakan ",1)]),t("div",_s,[ms,h(" "+l((U=s.all_questions)==null?void 0:U.length)+" Total Soal ",1)])]),t("div",bs,[(a(!0),d(I,null,Z(s.all_questions,(o,r)=>(a(),d("div",{key:r},[t("div",fs,[t("div",vs,[r+1==s.page?(a(),d("button",{key:0,onClick:u(m=>e.clickQuestion(r),["prevent"]),class:"btn btn-gray-400 btn-sm w-100"},l(r+1),9,ys)):c("",!0),r+1!=s.page&&o.answer==0?(a(),d("button",{key:1,onClick:u(m=>e.clickQuestion(r),["prevent"]),class:"btn btn-outline-primary btn-sm w-100"},l(r+1),9,gs)):c("",!0),r+1!=s.page&&(o==null?void 0:o.answer)!=0?(a(),d("button",{key:2,onClick:u(m=>e.clickQuestion(r),["prevent"]),class:"btn btn-info btn-sm w-100"},l(r+1),9,ks)):c("",!0)])])]))),128))])]),t("div",ws,[t("button",{onClick:n[3]||(n[3]=o=>e.showModalEndExam=!0),class:"btn btn-info btn-md border-0 shadow w-100"}," Kirim Jawaban ")])])]),e.showModalEndExam?(a(),d("div",{key:0,class:$(["modal fade",{show:e.showModalEndExam}]),tabindex:"-1","aria-hidden":"true",style:{display:"block"},role:"dialog"},[t("div",xs,[t("div",ps,[Ms,Es,t("div",Ss,[t("button",{onClick:n[4]||(n[4]=u((...o)=>e.endExam&&e.endExam(...o),["prevent"])),type:"button",class:"btn btn-primary"}," Ya, Akhiri "),t("button",{onClick:n[5]||(n[5]=u(o=>e.showModalEndExam=!1,["prevent"])),type:"button",class:"btn btn-secondary"}," Tutup ")])])])],2)):c("",!0),e.showModalEndTimeExam?(a(),d("div",{key:1,class:$(["modal fade",{show:e.showModalEndTimeExam}]),"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-hidden":"true",style:{display:"block"},role:"dialog"},[t("div",Cs,[t("div",qs,[Ts,Ns,t("div",Is,[t("button",{onClick:n[6]||(n[6]=u((...o)=>e.endExam&&e.endExam(...o),["prevent"])),type:"button",class:"btn btn-primary"}," Ya ")])])])],2)):c("",!0)],64)}const Bs=_t(bt,[["render",Ls]]);export{Bs as default};
